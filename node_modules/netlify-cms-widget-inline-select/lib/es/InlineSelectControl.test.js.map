{"version":3,"sources":["../../src/InlineSelectControl.test.jsx"],"names":["React","PropTypes","fromJS","render","fireEvent","InlineSelectControl","options","value","label","InlineSelectController","props","handleOnChange","jest","fn","setState","state","defaultValue","componentDidUpdate","onStateChange","children","Component","propTypes","func","isRequired","setup","field","renderArgs","stateChangeSpy","setActiveSpy","setInactiveSpy","helpers","onChangeSpy","describe","expectRadioInput","element","checked","expect","toBeInTheDocument","type","toEqual","toBe","it","name","getByLabelText","click","toHaveBeenCalledTimes","toHaveBeenCalledWith","expectCheckboxInput","multiple"],"mappings":"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","sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport { fromJS } from 'immutable';\nimport { render, fireEvent } from '@testing-library/react';\n// import 'react-testing-library/cleanup-after-each';\nimport '@testing-library/jest-dom/extend-expect';\nimport InlineSelectControl from './InlineSelectControl';\n\nconst options = [\n  { value: 'Foo', label: 'Foo' },\n  { value: 'Bar', label: 'Bar' },\n  { value: 'Baz', label: 'Baz' },\n];\n\nclass InlineSelectController extends React.Component {\n  handleOnChange = jest.fn((value) => {\n    this.setState({ value });\n  });\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      value: props.defaultValue, // eslint-disable-line react/prop-types\n    };\n  }\n\n  componentDidUpdate() {\n    const { onStateChange } = this.props;\n    onStateChange(this.state);\n  }\n\n  render() {\n    const { children } = this.props;\n    const { value } = this.state;\n    return children({ value, handleOnChange: this.handleOnChange });\n  }\n}\n\nInlineSelectController.propTypes = {\n  children: PropTypes.func.isRequired,\n  onStateChange: PropTypes.func.isRequired,\n};\n\nfunction setup({ field, defaultValue }) {\n  let renderArgs;\n  const stateChangeSpy = jest.fn();\n  const setActiveSpy = jest.fn();\n  const setInactiveSpy = jest.fn();\n\n  const helpers = render(\n    <InlineSelectController defaultValue={defaultValue} onStateChange={stateChangeSpy}>\n      {({ value, handleOnChange }) => {\n        renderArgs = { value, onChangeSpy: handleOnChange };\n        return (\n          <InlineSelectControl\n            field={field}\n            value={value}\n            onChange={handleOnChange}\n            forID=\"inline-select\"\n            classNameWrapper=\"\"\n            setActiveStyle={setActiveSpy}\n            setInactiveStyle={setInactiveSpy}\n          />\n        );\n      }}\n    </InlineSelectController>\n  );\n\n  return {\n    ...helpers,\n    ...renderArgs,\n    stateChangeSpy,\n    setActiveSpy,\n    setInactiveSpy,\n  };\n}\n\ndescribe('InlineSelectControl', () => {\n  describe('radios', () => {\n    const expectRadioInput = (element, checked = false) => {\n      expect(element).toBeInTheDocument();\n      expect(element.type).toEqual('radio');\n      expect(element.checked).toBe(checked);\n    };\n\n    it('should respect value', () => {\n      const field = fromJS({ options, name: 'radio_1' });\n      const { getByLabelText } = setup({ field, defaultValue: options[2].value });\n\n      expectRadioInput(getByLabelText('Foo'));\n      expectRadioInput(getByLabelText('Bar'));\n      expectRadioInput(getByLabelText('Baz'), true);\n    });\n\n    it('should call onChange with correct selectedItem', () => {\n      const field = fromJS({ options, name: 'radio_1' });\n      const { getByLabelText, onChangeSpy } = setup({ field });\n\n      expectRadioInput(getByLabelText('Foo'));\n      expectRadioInput(getByLabelText('Bar'));\n      expectRadioInput(getByLabelText('Baz'));\n\n      fireEvent.click(getByLabelText('Foo'));\n\n      expect(onChangeSpy).toHaveBeenCalledTimes(1);\n      expect(onChangeSpy).toHaveBeenCalledWith(options[0].value);\n    });\n  });\n\n  describe('checkboxes', () => {\n    const expectCheckboxInput = (element, checked = false) => {\n      expect(element).toBeInTheDocument();\n      expect(element.type).toEqual('checkbox');\n      expect(element.checked).toBe(checked);\n    };\n\n    it('should respect value', () => {\n      const field = fromJS({ options, name: 'checkbox_1', multiple: true });\n      const { getByLabelText } = setup({\n        field,\n        defaultValue: fromJS([options[1].value, options[2].value]),\n      });\n\n      expectCheckboxInput(getByLabelText('Foo'));\n      expectCheckboxInput(getByLabelText('Bar'), true);\n      expectCheckboxInput(getByLabelText('Baz'), true);\n    });\n\n    it('should call onChange with correct selectedItem', () => {\n      const field = fromJS({ options, name: 'checkbox_1', multiple: true });\n      const { getByLabelText, onChangeSpy } = setup({ field });\n\n      expectCheckboxInput(getByLabelText('Foo'));\n      expectCheckboxInput(getByLabelText('Bar'));\n      expectCheckboxInput(getByLabelText('Baz'));\n\n      fireEvent.click(getByLabelText('Foo'));\n      fireEvent.click(getByLabelText('Baz'));\n\n      expect(onChangeSpy).toHaveBeenCalledTimes(2);\n      expect(onChangeSpy).toHaveBeenCalledWith([options[0].value]);\n      expect(onChangeSpy).toHaveBeenCalledWith([options[0].value, options[2].value]);\n    });\n  });\n});\n"],"file":"InlineSelectControl.test.js"}